//package com.exploit.fastjson;
//
//import java.io.FileInputStream;
//import java.lang.reflect.Method;
//import java.nio.file.FileVisitOption;
//import java.nio.file.Files;
//import java.nio.file.Path;
//import java.nio.file.Paths;
//import java.util.*;
//import java.util.Map.Entry;
//import java.util.jar.JarEntry;
//import java.util.jar.JarInputStream;
//import java.util.stream.Stream;
//
//import com.alibaba.fastjson.util.TypeUtils;
//
//public class ThrowableSetMethod {
//    public static void main(String[] args) {
//        String dir = args[0];
//        EnumerateFileFromDir(dir, ".jar");
//    }
//
//    private static void EnumerateFileFromDir(String dir, String suffix) {
//        /*
//         * Java 8的用法，Java 7不支持
//         *
//         * https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html
//         * https://docs.oracle.com/javase/8/docs/api/java/nio/file/Paths.html
//         */
//        try
//                (Stream<Path> paths = Files.walk(Paths.get(dir), FileVisitOption.FOLLOW_LINKS)) { paths
//                .filter(Files::isRegularFile)
//                .map(p -> p.toString())
//                .filter(name -> name.endsWith(suffix))
////                    .peek( System.out::println )
//                .forEach(ThrowableSetMethod::EnumerateClassFromJar);
//        } catch (Exception e) {
//            System.out.println(e.toString());
//            e.printStackTrace();
//        }
//    }  /* end of EnumerateFileFromDir */
//
//    private static void EnumerateClassFromJar(String JarFile) {
//        try {
//
//            JarInputStream jis = new JarInputStream(new FileInputStream(JarFile), false);
//            JarEntry je;
//            String EntryName;
//            String ClassName;
//            /*
//             * 此处Long不能写成long，Integer不能写成int
//             */
//            Set<String> hm = new HashSet<>();
//
//            while (true) {
//                je = jis.getNextJarEntry();
//                if (je == null) {
//                    break;
//                }
//                EntryName = je.getName();
//                if (EntryName.endsWith(".class")) {
//                    // System.out.println( EntryName );
//                    /*
//                     * 干掉结尾的".class"再替换
//                     */
//                    ClassName = EntryName.replace("/", ".");
//                    // System.out.println( ClassName );
//                    PrivateFindBlackname(ClassName, hm);
//                }
//            }
//
//            Iterator<String> it = hm.iterator();
//            long hash;
//            String sth;
//
//            while (it.hasNext()) {
//                System.out.println( it.next());
//            }
//        } catch (Exception e) {
//            System.out.println(e.toString());
//            e.printStackTrace();
//        }
//    }  /* end of EnumerateClassFromJar */
//
//    private static void PrivateFindBlackname(String typeName, Set<String> hm) {
//        String className = typeName.replace('$', '.');
//        if (!className.contains("Exception")) return;
//        System.out.println(className);
//        try {
//            Class clazz = Class.forName(className);
//            Method[] methods = clazz.getMethods();
//            for (Method method: methods){
//                if ((method.getName().startsWith("set"))&&(Throwable.class.isAssignableFrom(clazz))){
//                    System.out.println(className);
//                }
//            }
//        } catch (ClassNotFoundException e) {
//            e.printStackTrace();
//        }
//    }  /* end of PrivateFindBlackname */
//}
